<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carol Terapia Integrativa</title>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --logo-size: 120px;
        --logo-initial-size: 20px;
        --logo-zoom-size: 123px;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Quicksand", sans-serif;
        color: #333;
        -webkit-font-smoothing: antialiased;
      }
      body {
        height: 100vh;
        background-image: linear-gradient(0deg, #FFDEE9 0%, #B5FFFC 100%);

      }

      body.loaded {
        background-size: 400%;
        animation: logo-animation 60s infinite alternate,
          loading-background ease-in-out 0.6s;
      }

      @keyframes loading-background {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      main {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        width: 450px;
        padding: 14px;
      }
      a {
        text-decoration: none;
      }
      .channel:active {
        color: #9b15ea;
      }

      .channel:hover {
        transform: scale(1.01);
        transition: all 0.1s;
        color: #9b15ea;
        font-weight: 800;
        /* text-shadow: #9b15ea 1px 5px 22px; */
      }
      a.lighting {
        animation: 1.3s infinite lighting linear;
        color: #9b15ea;
        font-weight: 600;
      }

      @keyframes lighting {
        0% {
          box-shadow: #9b15ea 0px 0px 3px;
        }
        50% {
          box-shadow: #9b15ea 0px 0px 10px;
        }
        100% {
          box-shadow: #9b15ea 0px 0px 3px;
        }
      }

      a.channel {
        background: #fff;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 2px 8px 0px;
        cursor: pointer;
        border-radius: 25px;

        padding: 12px 20px;
        margin: 5px;

        font-weight: 500;

        width: 100%;

        display: flex;
        justify-content: center;
        align-items: center;

        transition: all 0.1s;
      }

      .logo {
        display: -webkit-box;
        display: flex;
        -webkit-box-align: center;
        align-items: center;

        width: var(--logo-size);
        height: var(--logo-size);

        margin: auto;
        position: relative;
        box-sizing: border-box;
        color: #fff;
        background-size: contain;
        background-position-x: center;
        background-position-y: center;
        background-clip: padding-box;
        /* !importanté */
        border: solid 2px transparent;
        /* !importanté */
        border-radius: 50%;
        transition: width 0.5s, height 0.5s;
      }

      .initial {
        width: 1px;
        height: 1px;
      }

      .initial.logo {
        width: var(--logo-initial-size);
        height: var(--logo-initial-size);
        animation: ease-in-out 3s round-animation infinite;

        background: #8d04dd;
        transform: 0.8s ease-in-out 0s 1 zoomIn;
      }
      @keyframes zoomIn {
        0% {
          width: var(--logo-initial-size);
          height: var(--logo-initial-size);
          transform: translateY(25px);
        }
        100% {
          width: var(--logo-size);
          height: var(--logo-size);
          transform: translateY(0px);
        }
      }

      @keyframes round-animation {
        0% {
          transform: translateY(100px);
        }
        50% {
          transform: translateY(0px);
        }
        100% {
          transform: translateY(100px);
        }
      }
      .logo.success {
        animation: zoomIn 1s;
      }

      .logo.success:before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: -1;
        margin: -2px;
        /* !importanté */
        border-radius: inherit;

        /* !importanté */
        

        background-image: linear-gradient(to top, #fff1eb 0%, #ace0f9 100%);
        
        background-size: 400%;
        animation: logo-animation 2s infinite alternate;
      }
      @keyframes logo-animation {
        0% {
          background-position: left;
        }
        100% {
          background-position: right;
        }
      }
      h3 {
        font-size: 1em;
        margin: 0.7em;
        margin: 20px auto;
      }
      .container {
        display: flex;
        justify-content: center;
        align-items: center;

        box-sizing: content-box;
        height: 100%;
      }
      #dev {
        position: fixed;
        bottom: 10px;
        text-decoration: underline;
      }
      #dev > svg {
        color: #d92e7f;
        padding-top: 14px;
        font-size: 25px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <main>
        <a href="" class="logo initial"></a>
      </main>
    </div>
    <script>
      const links_url = "https://sheetdb.io/api/v1/50oqpz95fbm2o";

      window.onload = async () => {
        const logo_element = document.querySelector(".logo");
        

        const main = document.querySelector("main");

        fetch(links_url)
          .then((response) => response.json())
          .then((data) => load_data(data))
          .catch(()=>errorOnLoad());


        function errorOnLoad(){
          // alert("error on load");
          const account_element_text = document.createElement("h3");

          account_element_text.textContent="error on load";
          main.appendChild(account_element_text);
        }



        function load_data(data) {

          const logo = data.filter((element) => element.type === "logo")[0];
          const account = data.filter(
            (element) => element.type === "profile"
          )[0];
          const buttons = data.filter((element) => element.type === "button");
          const background = data.filter(
            (element) => element.type === "background"
          )[0];

          const body = document.querySelector("body");
          body.classList.add("loaded");

          body.style.background =
            `url(${background.link})` || background.text || "#9b15ea";

          logo_element.setAttribute("href", account.link);
          logo_element.setAttribute("target", "_blank");

          logo_element.setAttribute("style", `background:url(${logo.link})`);
          logo_element.style.backgroundSize = "contain";
          logo_element.style.backgroundPositionX = "center";
          logo_element.style.backgroundPositionX = "center";
          logo_element.style.backgroundClip = "padding-box";

          const account_element = document.createElement("a");
          account_element.setAttribute("href", account.link);
          account_element.setAttribute("target", "_blank");

          const account_element_text = document.createElement("h3");
          account_element_text.textContent = account.text;

          account_element.appendChild(account_element_text);

          // main.appendChild(logo_element);
          main.appendChild(account_element);

          buttons.map((button) => {
            const channel = document.createElement("a");
            channel.setAttribute("href", button.link);
            channel.setAttribute("target", "_blank");

            channel.classList.add("channel");
            channel.textContent = button.text;

            main.appendChild(channel);
          });
          logo_element.classList.add("success");
          logo_element.classList.remove("initial");

          document.querySelector(".channel").classList.add("lighting");
          addDev();
        }
      };
      function addDev() {
        const main = document.querySelector("main");
        main.innerHTML += `<a id="dev" href="https://www.instagram.com/romualdo_ah/" target="_blank">
        feito com <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 512 512"><path d="M256 448a32 32 0 0 1-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8c-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 0 0 9.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64c.54 54.21-18.63 104.26-58.61 153c-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 0 1-18 5.56z" fill="#d92e7f"/></svg> por romualdo_ah
        </a>`;
      }
    </script>
  </body>
</html>
